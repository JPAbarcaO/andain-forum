<div class="login-container">
  <p-card class="login-card">
    <!-- Usa [(activeIndex)] para enlazar el índice activo -->
    <p-tabView [(activeIndex)]="activeTabIndex">
      <!-- Pestaña de Login -->
      <p-tabPanel header="Iniciar Sesión">
        <h2 class="text-center">Iniciar Sesión</h2>
        <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
          <div class="p-fluid">
            <label for="email">Correo Electrónico</label>
            <input
              id="email"
              pInputText
              type="email"
              formControlName="email"
              placeholder="Ingrese su correo"
            />
            <small
              class="text-danger"
              *ngIf="
                loginForm.get('email')?.invalid &&
                loginForm.get('email')?.touched
              "
            >
              <span *ngIf="loginForm.get('email')?.errors?.['required']"
                >El correo es obligatorio.</span
              >
              <span *ngIf="loginForm.get('email')?.errors?.['pattern']"
                >El formato del correo es inválido.</span
              >
            </small>
          </div>

          <div class="p-fluid">
            <label for="password">Contraseña</label>
            <p-password
              id="password"
              formControlName="password"
              [feedback]="false"
              placeholder="Ingrese su contraseña"
            ></p-password>
            <small
              class="text-danger"
              *ngIf="
                loginForm.get('password')?.invalid &&
                loginForm.get('password')?.touched
              "
            >
              La contraseña debe tener al menos 6 caracteres.
            </small>
          </div>

          <p-button
            type="submit"
            label="Ingresar"
            icon="pi pi-sign-in"
            class="p-mt-3"
            [disabled]="loginForm.invalid"
          ></p-button>
        </form>
      </p-tabPanel>

      <!-- Pestaña de Registro -->
      <p-tabPanel header="Registrarse">
        <h2 class="text-center">Registro</h2>
        <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
          <div class="p-fluid">
            <label for="name">Nombre Completo</label>
            <input
              id="name"
              pInputText
              type="text"
              formControlName="name"
              placeholder="Ingrese su nombre"
            />
            <small
              class="text-danger"
              *ngIf="
                registerForm.get('name')?.invalid &&
                registerForm.get('name')?.touched
              "
            >
              El nombre es obligatorio.
            </small>
          </div>

          <div class="p-fluid">
            <label for="reg-email">Correo Electrónico</label>
            <input
              id="reg-email"
              pInputText
              type="email"
              formControlName="email"
              placeholder="Ingrese su correo"
            />
            <small
              class="text-danger"
              *ngIf="
                registerForm.get('email')?.invalid &&
                registerForm.get('email')?.touched
              "
            >
              <span *ngIf="registerForm.get('email')?.errors?.['required']"
                >El correo es obligatorio.</span
              >
              <span *ngIf="registerForm.get('email')?.errors?.['pattern']"
                >El formato del correo es inválido.</span
              >
            </small>
          </div>

          <div class="p-fluid">
            <label for="reg-password">Contraseña</label>
            <p-password
              id="reg-password"
              formControlName="password"
              [feedback]="false"
              placeholder="Ingrese su contraseña"
            ></p-password>
            <small
              class="text-danger"
              *ngIf="
                registerForm.get('password')?.invalid &&
                registerForm.get('password')?.touched
              "
            >
              La contraseña debe tener al menos 6 caracteres.
            </small>
          </div>

          <p-button
            type="submit"
            label="Registrarse"
            icon="pi pi-user-plus"
            class="p-mt-3"
            [disabled]="registerForm.invalid"
          ></p-button>
        </form>
      </p-tabPanel>
    </p-tabView>
  </p-card>
</div>
